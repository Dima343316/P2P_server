# P2P Server

Простой P2P-сервер с зашифрованным обменом сообщениями и HTTP API для управления узлами.

---

## Оглавление

- [Описание](#описание)
- [Требования](#требования)
- [Установка](#установка)
- [Конфигурация](#конфигурация)
- [Запуск](#запуск)
- [HTTP API](#http-api)
- [Пример работы](#пример-работы)

---

## Описание

Этот проект реализует peer-to-peer (P2P) узлы, которые могут соединяться друг с другом, обмениваться зашифрованными сообщениями и управляться через HTTP API.  
Для шифрования сообщений используется библиотека `cryptography`. HTTP API построен на FastAPI и запускается с помощью Uvicorn.

---

## Требования

- Python 3.10+
- Все зависимости указаны в файле `requirements.txt`

---

## Установка

Клонируйте репозиторий и установите зависимости:

```bash
pip install -r requirements.txt

## Конфигурация

Создайте файл .env в корне проекта и добавьте туда ваш секретный ключ для шифрования:

FERNET_KEY=ваш_ключ_из_fernet_generate_key()

Вы можете сгенерировать ключ в Python:

from cryptography.fernet import Fernet
print(Fernet.generate_key().decode())

## Запуск
Первый узел

python main.py

По умолчанию первый узел слушает на 127.0.0.1:7000 и запускает HTTP API на порту 8000+.
Второй узел

В новом терминале запустите второй узел, который подключится к первому:

python two_nodes.py

По умолчанию второй узел слушает на 127.0.0.1:9001.
HTTP API
Просмотр списка пиров

## Запрос:

GET http://localhost:8003/peers

Ответ:

{
  "peers": ["127.0.0.1:7000", "127.0.0.1:9001"]
}

Отправка сообщения всем пирами

Запрос:

POST http://localhost:8003/relay
Content-Type: application/json

{
  "message": "Текст сообщения"
}

Ответ:

{
  "status": "ok",
  "message": "Текст сообщения"
}

Пример работы

    Первый узел стартует и слушает порт 7000.

    Второй узел подключается к первому, слушает порт 9001.

    Узлы могут обмениваться зашифрованными сообщениями.

    Через HTTP API можно получить список подключённых пиров и отправлять сообщения на всех пиров сразу.


![Описание изображения](путь_к_изображению)
